<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<title>Playing</title>

		<script>
			function myfunc(e) {
				e = e || window.event;
				console.log(e);
				nudge();
			}
		</script>
	</head>

	<body onload="renderSprite()">
		<canvas id="pacMeanAnimation" onkeydown="myfunc()" style="border: solid 5px #8A2BE2;">
		Your browser does not support the HTML5 canvas tag.
		</canvas>

	<script>
		var pacMeanImg = new Image();
		pacMeanImg.src = "images/pacmean-animation.png";

		function gameLoop () {
		  window.requestAnimationFrame(gameLoop);

		  pacMean.update();
		  pacMean.render();
		}

		function sprite (options) {

			var that = {},
				x = 0, y = 0,
				frameIndex = 0,
				tickCount = 0,
				ticksPerFrame = options.ticksPerFrame || 0,
				numberOfFrames = options.numberOfFrames || 1;

			that.context = options.context;
			that.width = options.width;
			that.height = options.height;
			that.image = options.image;
			that.x = 0;
			that.loop = options.loop;

			that.update = function () {
        tickCount += 1;

        if (tickCount > ticksPerFrame) {
        	tickCount = 0;

          // Go to the next frame
					if (frameIndex < numberOfFrames - 1) {
							// Go to the next frame
							frameIndex += 1;
					} else if (that.loop) {
							frameIndex = 0;
					}
				}
    	};

			that.render = function() {
				//Draw the animation
				that.context.drawImage(
					that.image,
					frameIndex * that.width / numberOfFrames,
					0,
					that.width / numberOfFrames,
					that.height,
					x,
					y,
					that.width / numberOfFrames,
					that.height);
			};

			that.nudge = function(h, v){
				x += h;
				y += v
			}
			return that;
		}

		var canvas = document.getElementById("pacMeanAnimation")
	  canvas.width = 600;
	  canvas.height = 600;

		var pacMean = sprite({
			context: canvas.getContext("2d"),
			width: 389,
			height: 130,
			image: pacMeanImg,
			numberOfFrames: 3,
			ticksPerFrame: 10,
			loop: true
		});


	function renderSprite() {
		pacMean.render();
	}


	// Start the game loop as soon as the sprite sheet is loaded
			pacMeanImg.addEventListener("load", gameLoop);


// frames 0, 1, 2, 3, 4, 5, 6, 7, 8, 9
// rightFrames = [0, 5, 6]
// leftFrame = [0, 1, 2]
// dir = 0 for right, 1, for left, etc
frameIndexes = [[0, 5, 6], [0, 1, 2], ...]
frameIndexes[dir][frameIndex]
frameIndexes[0] would be [0, 5, 6]

currently frameIndex is looping 0, 1, 2, 0, 1, 2, 0, 1, 2,
set dir to be 0, 1, 2, or 3 based on direction being right, left, etc
var // XXX:  = 0;
var LEFT = 1;
var UP = 2;
var DOWN = 3;

then frame
	</script>
	</body>
</html>
